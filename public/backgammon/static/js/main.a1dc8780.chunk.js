(this.webpackJsonpbackgammon=this.webpackJsonpbackgammon||[]).push([[0],{13:function(e,t,n){e.exports={Quarter:"Quarter_Quarter__3woYV"}},14:function(e,t,n){e.exports={Field:"Field_Field__Z28Dh"}},17:function(e,t,n){e.exports={Edge:"Edge_Edge__2i6XZ"}},18:function(e,t,n){e.exports={Dice:"Dice_Dice__2ENsz"}},23:function(e,t,n){},24:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(7),a=n.n(r),o=(n(23),n(24),n(13)),s=n.n(o),u=n(2),d=n(14),l=n.n(d),p=n(0),h=function(e){var t=e.position%5*55+20*Math.floor(e.position/5);return Object(p.jsx)("button",{className:e.className,style:e.top?{top:t}:{top:245-t},"data-testid":"Chip"})},f=n(6),b=function(){return Object(f.b)()},j=f.c,v=n(4),O=Object(u.a)(Array(24)).map((function(e){return[0,0]})),m=[{pos:0,amount:2},{pos:11,amount:5},{pos:16,amount:3},{pos:18,amount:5}],y=O.map((function(e,t){var n=[0,0];return m.forEach((function(e){t===e.pos?n[0]=e.amount:23-t===e.pos&&(n[1]=e.amount)})),n})),x=n(3),g=n(11),P=n.n(g),C=n(16),w=Object(v.b)("rollDice",(function(e,t){var n=t.getState,c=t.dispatch;c(M(e));var i=n().chips.kickedChips,r=n().round.activePlayer;i[r]&&(c(pe(r?24:-1)),c(fe(te(n(),!0))))})),k=function(e,t){t(I(e)),t(B()),t(be(y))},N=Object(v.b)("swapPlayers",function(){var e=Object(C.a)(P.a.mark((function e(t,n){var c,i,r,a,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.getState,i=n.dispatch,r=c(),a=r.chips,o=r.round,a.board.reduce((function(e,t){return e+t[o.enemyPlayer]}),0)||k(o.enemyPlayer,i),e.next=5,new Promise((function(e){return setTimeout((function(){return e()}),1e3)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(v.c)({name:"round",initialState:{activePlayer:0,enemyPlayer:1,diceRoll:[1,1],newRound:!0,showPopper:!0,playerNames:["player 1","player 2"],gameStarted:!1,gameEnd:!1,points:[0,0]},reducers:{setDiceRoll:function(e,t){var n=t.payload;e.diceRoll=n,e.newRound=!1},beginRound:function(e){e.newRound=!1},hidePopper:function(e){e.showPopper=!1},savePlayerName:function(e,t){var n=t.payload;e.playerNames[n.player]=n.name},startGame:function(e){e.gameStarted=!0},endGame:function(e){e.gameEnd=!0},addPoints:function(e,t){var n=t.payload;e.points[n]++}},extraReducers:function(e){e.addCase(N.pending,(function(e){var t=[e.enemyPlayer,e.activePlayer];e.activePlayer=t[0],e.enemyPlayer=t[1],e.newRound=!0,e.showPopper=!0})).addCase(N.fulfilled,(function(e){e.showPopper=!1,e.gameEnd=!1}))}}),S=R.actions,M=S.setDiceRoll,E=S.beginRound,_=S.hidePopper,D=S.savePlayerName,F=S.startGame,B=S.endGame,I=S.addPoints,z=R.reducer,A=function(e){return e.round.activePlayer},Q=function(e){return e.round.diceRoll},T=function(e){return e.round.newRound},G=function(e){return e.round.showPopper},L=function(e){return e.round.playerNames},J=function(e){return e.round.gameStarted},U=function(e){return e.round.gameEnd},Z=function(e){return e.round.points},H=function(){return Math.floor(6*Math.random())+1},V=function(){var e=[H(),H()];return e[0]===e[1]?[].concat(e,e):e},X=function e(){var t=V();return t.length<3?t:e()},Y=function(e){return-1===e||24===e},q=function(e,t){return e.indexOf(t)>=0},K=function(e){var t=e.chips,n=e.round,c=0===n.activePlayer?t.board.slice(0,18):t.board.slice(6);return!(t.kickedChips[n.activePlayer]>0)&&0===c.reduce((function(e,t){return e+t[n.activePlayer]}),0)},W=function(e,t){var n=e.chips,c=e.round;return!!function(e){return e>=0&&e<24}(t)&&n.board[t][c.enemyPlayer]<=1},$=function(e){var t=e.chips,n=e.round,c=n.diceRoll,i=n.activePlayer,r=t.selectedChip,a=[];return void 0===r||c.forEach((function(e){var c=(i?-1*e:e)+r;W({chips:t,round:n},c)&&a.indexOf(c)<0&&a.push(c),function(e,t,n){var c=e.chips,i=e.round,r=c.selectedChip,a=i.activePlayer,o=i.diceRoll,s=a?r+1:24-r;!q(o,s)&&function(e){var t=e.chips,n=e.round.activePlayer;return t.board.reduce((function(e,t,c){return n?e<c+1&&t[n]?c+1:e:e<24-c&&t[n]?24-c:e}),0)}({chips:c,round:i})>s||(K({chips:c,round:i})&&t<0&&-1===n.indexOf(-1)&&n.push(-1),K({chips:c,round:i})&&t>23&&-1===n.indexOf(24)&&n.push(24))}({chips:t,round:n},c,a)})),a},ee=function e(t,n,c){var i=t.chips,r=t.round,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=r.diceRoll,s=r.activePlayer,u=i.selectedChip;if(void 0!==u){var d=n+o[c],l=(s?-1*d:d)+u;if(W({chips:i,round:r},l)){a.push(l);var p=o.slice(0,c+1).reduce((function(e,t){return e+t}),0);if(c<o.length-1)return e({chips:i,round:r},p,c+1,a)}return a}},te=function(e){var t=e.chips,n=e.round,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$({chips:t,round:n}),r=Object(u.a)(n.diceRoll);return c?i:i.length?[].concat(Object(u.a)(i),Object(u.a)(ee({chips:t,round:n},r[0],1))):i},ne=function(e){var t=e.chips,n=e.round;return t.kickedChips[n.activePlayer]>0},ce=function(e){var t=e.chips,n=e.round,c=n.activePlayer,i=t.board;return ne({chips:t,round:n})?!te({chips:Object(x.a)(Object(x.a)({},t),{},{selectedChip:c?24:-1}),round:n}).length:i.map((function(e,i){return e[c]>0?te({chips:Object(x.a)(Object(x.a)({},t),{},{selectedChip:i}),round:n}):[]})).every((function(e){return!e.length}))},ie=function(e,t,n,c){-1!==t&&24!==t?c[t][n]--:e(ve(n))},re=function(e,t,n){var c=t.chips,i=t.round,r=Object(u.a)(c.board.map((function(e){return Object(u.a)(e)})));if(c.possibleMoves.indexOf(n)>=0){if(ie(e,c.selectedChip,i.activePlayer,r),n<0||n>23)return r;!function(e,t,n){n[e][t]++}(n,i.activePlayer,r),function(e,t){var n=e.chips,c=e.round;return 1===n.board[t][c.enemyPlayer]}({chips:c,round:i},n)&&function(e,t,n,c){t.chips;var i=t.round;ie(e,n,i.enemyPlayer,c),e(je(i.enemyPlayer))}(e,{chips:c,round:i},n,r)}return r},ae=function(e,t,n){t(be(re(t,e,n))),t(M(function(e,t){var n=e.chips,c=e.round,i=Object(u.a)(c.diceRoll),r=Math.abs(t-n.selectedChip);return q(i,r)?function(e,t){e.splice(e.indexOf(t),1)}(i,r):Y(t)?function(e,t,n){t.splice(t.indexOf(t.filter((function(e){return e>n})).sort((function(e,t){return e-t}))[0]),1)}(0,i,r):Y(t)||function(e,t){for(var n=0;e.slice(0,n).reduce((function(e,t){return e+t}),0)<t;)if(n++,e.slice(0,n).reduce((function(e,t){return e+t}),0)===t){e.splice(0,n);break}}(i,r),i}(e,n))),t(pe(e.chips.selectedChip))},oe={selectedChip:void 0,board:y,possibleMoves:[],kickedChips:[0,0]},se=function(e){e(he()),e(fe([])),e(M([])),e(N())},ue=Object(v.b)("fieldClickHandler",(function(e,t){var n=t.getState,c=t.dispatch,i=n().chips,r=i.selectedChip,a=i.possibleMoves;if(void 0!==r&&r!==e){if(ce(n())&&se(c),-1===a.indexOf(e))return;return ae(n(),c,e),function(e,t){var n=e.chips,c=e.round;if(ne({chips:n,round:c})){var i=c.activePlayer?24:-1;t(pe(i)),t(fe(te({chips:Object(x.a)(Object(x.a)({},n),{},{selectedChip:i}),round:c})))}}(n(),c),void(n().round.diceRoll.length&&!ce(n())||se(c))}n().round.diceRoll.length&&(ce(n())&&se(c),function(e,t){var n=e.chips,c=e.round;if(void 0!==t)return n.board[t][c.activePlayer]>0}(n(),e)&&!function(e,t){var n=e.chips,c=e.round;return!te({chips:Object(x.a)(Object(x.a)({},n),{},{selectedChip:t}),round:c}).map((function(e){return Math.abs(t-e)})).length}(n(),e)&&c(pe(e)),c(fe(te(n()))))})),de=Object(v.c)({name:"board",initialState:oe,reducers:{selectUnselect:function(e,t){var n=t.payload;(function(e,t){return void 0===e.selectedChip&&(e.selectedChip=t,!0)})(e,n)||function(e,t){e.selectedChip===t&&(e.selectedChip=void 0,e.possibleMoves=[])}(e,n)},unselectChip:function(e){e.selectedChip=void 0},setPossibleMoves:function(e,t){var n=t.payload;e.possibleMoves=n},updateBoard:function(e,t){var n=t.payload;e.board=n},kickStone:function(e,t){var n=t.payload;e.kickedChips[n]++},returnOnBoard:function(e,t){var n=t.payload;e.kickedChips[n]--}}}),le=de.actions,pe=le.selectUnselect,he=le.unselectChip,fe=le.setPossibleMoves,be=le.updateBoard,je=le.kickStone,ve=le.returnOnBoard,Oe=function(e){return e.chips.selectedChip},me=function(e){return e.chips.board},ye=function(e){return e.chips.possibleMoves},xe=function(e){return e.chips.kickedChips},ge=de.reducer,Pe=function(e){var t=e.className,n=e.chips,c=e.top,i=e.index,r=b(),a=j(Oe),o=j(ye).indexOf(i)>=0&&"possible-target",s=n.reduce((function(e,t){return e+t})),d=function(e){return["chip","chip-absolute",n[0]>0?"chip-white":"chip-black",a===i&&e===s-1&&"selected"].join(" ")},f=Object(u.a)(Array(s)).map((function(e,t){return Object(p.jsx)(h,{top:c,position:t,className:d(t)},t)}));return Object(p.jsxs)("section",{className:l.a.Field,"data-testid":"Field",onClick:function(){r(ue(i))},children:[Object(p.jsx)("div",{className:"".concat(t," ").concat(o)}),f]})},Ce=n(17),we=n.n(Ce),ke=function(e){var t=e.top,n=j(xe),c=t?n[1]:n[0],i=t?["chip","chip-black"]:["chip","chip-white"];return Object(p.jsx)("div",{className:we.a.Edge,children:Object(u.a)(Array(c)).map((function(e,n){return Object(p.jsx)(h,{top:t,className:i.join(" "),position:n},n)}))})},Ne=function(e){var t=e.top,n=e.id,c=e.className,i=j(me).slice(6*n,6*n+6),r=function(e){var n=e%2?"black":"red";return t?"arrow-down ".concat(e%2?"black":"red"):"arrow-up ".concat(n)},a=i.map((function(e,c){var a=t?5-c:c;return Object(p.jsx)(Pe,{top:t,chips:i[a],className:r(a),index:6*n+a},a)}));return Object(p.jsx)("div",{className:s.a.Quarter,"data-testid":"Quarter",children:Object(p.jsxs)("div",{className:c,children:[a,n%3&&Object(p.jsx)(ke,{top:t},6)]})})},Re=function(e){var t=[Object(p.jsx)(Ne,{id:1,top:!0},1),Object(p.jsx)(Ne,{id:0,top:!0},0)],n=[Object(p.jsx)(Ne,{id:2},2),Object(p.jsx)(Ne,{id:3},3)];return Object(p.jsxs)("section",{children:[Object(p.jsx)("section",{style:{margin:"0",paddingBottom:"0!important"},children:t}),Object(p.jsx)("section",{children:n})]})},Se=n(18),Me=n.n(Se),Ee=n.p+"static/media/dado-1.44c20c24.svg",_e=n.p+"static/media/dado-2.ed346677.svg",De=n.p+"static/media/dado-3.a2405b12.svg",Fe=n.p+"static/media/dado-4.1b71e7b1.svg",Be=n.p+"static/media/dado-5.4bb6191d.svg",Ie=n.p+"static/media/dado-6.d5824cf7.svg",ze=function(e){var t=[Ee,_e,De,Fe,Be,Ie][e.num-1];return Object(p.jsx)("div",{className:Me.a.Dice,children:Object(p.jsx)("img",{src:t,alt:"one",style:{width:"100px"}})})};var Ae=function(e){var t=j(Q),n=j(T),c=b();return Object(p.jsxs)("section",{className:"vertical-align",onClick:function(e){if(e.stopPropagation(),n){c(E);var t=V();c(w(t))}},children:[t.map((function(e,t){return Object(p.jsx)(ze,{num:e},t)})),!t.length&&Object(p.jsx)(ze,{num:1}),!t.length&&Object(p.jsx)(ze,{num:1})]})},Qe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:500},Te=Object(x.a)(Object(x.a)({},Qe),{},{width:"400px",backgroundColor:"white",borderRadius:"5px",padding:"15px",boxShadow:"5px 5px 28px #888888",opacity:0,transition:"opacity 1s"}),Ge=Object(x.a)(Object(x.a)({},Te),{},{opacity:1});var Le=function(e){var t=j(G),n=j(A),c=j(L),i=j(U)?"".concat(c[n]," has won the round"):"It's your turn ".concat(c[n]);return Object(p.jsxs)("div",{style:t?Ge:Te,children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:i}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"Pleas roll the dice!"})]})},Je=n(12);var Ue=function(e){var t=b(),n=Object(c.useState)(0),i=Object(Je.a)(n,2),r=i[0],a=i[1],o=j(L),s=Object(c.useState)(o[r]),u=Object(Je.a)(s,2),d=u[0],l=u[1];return Object(p.jsxs)("section",{style:r<2?Ge:Te,children:[Object(p.jsxs)("h1",{children:["please choose your name ",o[r]]}),Object(p.jsx)("input",{style:{width:"80%",fontSize:"x-large"},type:"text",value:d,onChange:function(e){l(e.target.value)}}),Object(p.jsx)("button",{style:{fontSize:"16px",marginBottom:15,marginLeft:10,width:"15%"},onClick:function(e){a(r+1),!r&&l(o[1]),t(D({player:r,name:d})),r&&t(F())},children:"Save"})]})};var Ze=function(e){var t=j(A),n=j(L);return Object(p.jsxs)("section",{style:{display:"flex"},children:[Object(p.jsxs)("h1",{style:{paddingRight:50},children:["It's your turn Player ",n[t]]}),Object(p.jsx)(h,{position:1,className:"chip ".concat(t?"chip-black":"chip-white")})]})};var He=function(e){var t=j(L),n=j(Z);return Object(p.jsxs)("div",{style:{paddingRight:100},children:[Object(p.jsxs)("p",{children:[t[0],": ",n[0]]}),Object(p.jsxs)("p",{children:[t[1],": ",n[1]]})]})};var Ve=function(){var e=b(),t=j(J);Object(c.useEffect)((function(){if(e(_()),t){var n=X();e(M(n)),n[0]<n[1]&&e(N())}}),[e,t]);var n=j(A);return Object(p.jsxs)("section",{style:Qe,children:[Object(p.jsx)(Le,{player:"test"}),Object(p.jsx)(Ue,{}),Object(p.jsxs)("section",{style:{display:"flex",justifyContent:"space-between"},children:[Object(p.jsx)(Ze,{}),Object(p.jsx)(He,{})]}),Object(p.jsxs)("section",{className:"board",children:[Object(p.jsx)("section",{style:{display:"inline-block"},children:Object(p.jsx)(Re,{})}),Object(p.jsx)("section",{className:"side",onClick:function(){e(ue(n?-1:24))},children:Object(p.jsx)(Ae,{})})]}),Object(p.jsxs)("div",{style:{position:"absolute",bottom:0,fontSize:6},children:["Icons made by ",Object(p.jsx)("a",{href:"https://www.flaticon.com/authors/talha-dogar",title:"Talha Dogar",children:"Talha Dogar"})," from ",Object(p.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))},Ye=Object(v.a)({reducer:{chips:ge,round:z}});a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(f.a,{store:Ye,children:Object(p.jsx)(Ve,{})})}),document.getElementById("root")),Xe()}},[[33,1,2]]]);
//# sourceMappingURL=main.a1dc8780.chunk.js.map